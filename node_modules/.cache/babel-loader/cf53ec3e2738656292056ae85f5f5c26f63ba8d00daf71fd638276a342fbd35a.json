{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vishn\\\\Downloads\\\\Gallery Application\\\\frontend\\\\src\\\\components\\\\AISearch.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Search, Upload } from 'lucide-react';\nimport Header from './Header';\n\n// AISearch component: analyzes an image using Gemini API (Google AI) and finds similar images\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AISearch = ({\n  gallery\n}) => {\n  _s();\n  const apiKey = process.env.REACT_APP_API_KEY;\n  // const [selectedFile, setSelectedFile] = useState(null);\n  // const [previewUrl, setPreviewUrl] = useState('');\n  const [summary, setSummary] = useState('');\n  const [searchQuery, setSearchQuery] = useState(''); // For CSE\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Analyze text using Gemini 2.0 Flash API (Google AI)\n  const analyzeImage = async () => {\n    if (!apiKey) {\n      setError('Please provide a valid Gemini API key.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setSummary('');\n    try {\n      var _response$data, _response$data$candid, _response$data$candid2, _response$data$candid3, _response$data$candid4, _response$data$candid5, _summaryText$match;\n      // Gemini 2.0 Flash text-only endpoint\n      const response = await axios.post('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=' + apiKey, {\n        contents: [{\n          parts: [{\n            text: 'Explain how AI works'\n          }]\n        }]\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      // Parse Gemini response\n      const summaryText = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$candid = _response$data.candidates) === null || _response$data$candid === void 0 ? void 0 : (_response$data$candid2 = _response$data$candid[0]) === null || _response$data$candid2 === void 0 ? void 0 : (_response$data$candid3 = _response$data$candid2.content) === null || _response$data$candid3 === void 0 ? void 0 : (_response$data$candid4 = _response$data$candid3.parts) === null || _response$data$candid4 === void 0 ? void 0 : (_response$data$candid5 = _response$data$candid4[0]) === null || _response$data$candid5 === void 0 ? void 0 : _response$data$candid5.text) || 'No summary found.';\n      setSummary(summaryText);\n      // Extract keywords from the summary (simple split by comma/space)\n      const keywords = ((_summaryText$match = summaryText.match(/\\b\\w+\\b/g)) === null || _summaryText$match === void 0 ? void 0 : _summaryText$match.slice(0, 5)) || [];\n      // Set query for CSE widget\n      setSearchQuery(keywords.join(' '));\n    } catch (err) {\n      setError('Failed to analyze text with Gemini.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen text-white pt-4 px-8 relative overflow-hidden group/bg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto relative mt-16\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-800/50 backdrop-blur-md rounded-2xl p-8 shadow-xl border border-slate-700/30\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          badgeText: \"AI Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-white mb-4 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 86\n          }, this), \" AI Image Search\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"group inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-cyan-600/80 hover:bg-cyan-700 text-white font-semibold text-base shadow-lg border border-cyan-400/30 hover:border-cyan-400 backdrop-blur-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 mb-4\",\n            onClick: analyzeImage,\n            disabled: loading,\n            children: loading ? 'Analyzing...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Search, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 46\n              }, this), \" Analyze Sample Text\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"group inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-cyan-600/80 hover:bg-cyan-700 text-white font-semibold text-base shadow-lg border border-cyan-400/30 hover:border-cyan-400 backdrop-blur-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 mb-4\",\n          onClick: analyzeImage,\n          disabled: loading || !selectedFile || !apiKey,\n          children: loading ? 'Analyzing...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 44\n            }, this), \" Analyze & Find Similar\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-400 text-sm mb-2\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), summary && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-slate-900/70 text-white rounded-lg p-4 mb-4 border border-slate-700/30\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold mb-2\",\n            children: \"AI Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"whitespace-pre-line text-sm\",\n            children: summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), searchQuery && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gcse-search\",\n            \"data-query\": searchQuery\n          }, searchQuery, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(AISearch, \"MHrZnZsqMsa1wRvBsV1RKrNyao0=\");\n_c = AISearch;\nexport default AISearch;\nvar _c;\n$RefreshReg$(_c, \"AISearch\");","map":{"version":3,"names":["React","useState","axios","Search","Upload","Header","jsxDEV","_jsxDEV","Fragment","_Fragment","AISearch","gallery","_s","apiKey","process","env","REACT_APP_API_KEY","summary","setSummary","searchQuery","setSearchQuery","loading","setLoading","error","setError","analyzeImage","_response$data","_response$data$candid","_response$data$candid2","_response$data$candid3","_response$data$candid4","_response$data$candid5","_summaryText$match","response","post","contents","parts","text","headers","summaryText","data","candidates","content","keywords","match","slice","join","err","className","children","badgeText","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","selectedFile","_c","$RefreshReg$"],"sources":["C:/Users/vishn/Downloads/Gallery Application/frontend/src/components/AISearch.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Search, Upload } from 'lucide-react';\nimport Header from './Header';\n\n// AISearch component: analyzes an image using Gemini API (Google AI) and finds similar images\nconst AISearch = ({ gallery }) => {\n  const apiKey = process.env.REACT_APP_API_KEY;\n  // const [selectedFile, setSelectedFile] = useState(null);\n  // const [previewUrl, setPreviewUrl] = useState('');\n  const [summary, setSummary] = useState('');\n  const [searchQuery, setSearchQuery] = useState(''); // For CSE\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Analyze text using Gemini 2.0 Flash API (Google AI)\n  const analyzeImage = async () => {\n    if (!apiKey) {\n      setError('Please provide a valid Gemini API key.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setSummary('');\n\n    try {\n      // Gemini 2.0 Flash text-only endpoint\n      const response = await axios.post(\n        'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=' + apiKey,\n        {\n          contents: [\n            {\n              parts: [\n                { text: 'Explain how AI works' }\n              ]\n            }\n          ]\n        },\n        {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      // Parse Gemini response\n      const summaryText = response.data?.candidates?.[0]?.content?.parts?.[0]?.text || 'No summary found.';\n      setSummary(summaryText);\n      // Extract keywords from the summary (simple split by comma/space)\n      const keywords = summaryText.match(/\\b\\w+\\b/g)?.slice(0, 5) || [];\n      // Set query for CSE widget\n      setSearchQuery(keywords.join(' '));\n    } catch (err) {\n      setError('Failed to analyze text with Gemini.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen text-white pt-4 px-8 relative overflow-hidden group/bg\">\n      <div className=\"max-w-6xl mx-auto relative mt-16\">\n        <div className=\"bg-slate-800/50 backdrop-blur-md rounded-2xl p-8 shadow-xl border border-slate-700/30\">\n          <Header badgeText=\"AI Search\" />\n          <h2 className=\"text-2xl font-bold text-white mb-4 flex items-center gap-2\"><Search className=\"w-6 h-6\" /> AI Image Search</h2>\n          {/* No file upload UI for text-only Gemini API test */}\n          <div className=\"my-4\">\n            <button\n              className=\"group inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-cyan-600/80 hover:bg-cyan-700 text-white font-semibold text-base shadow-lg border border-cyan-400/30 hover:border-cyan-400 backdrop-blur-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 mb-4\"\n              onClick={analyzeImage}\n              disabled={loading}\n            >\n              {loading ? 'Analyzing...' : (<><Search className=\"w-5 h-5\" /> Analyze Sample Text</>)}\n            </button>\n          </div>\n          <button\n            className=\"group inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-cyan-600/80 hover:bg-cyan-700 text-white font-semibold text-base shadow-lg border border-cyan-400/30 hover:border-cyan-400 backdrop-blur-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 mb-4\"\n            onClick={analyzeImage}\n            disabled={loading || !selectedFile || !apiKey}\n          >\n            {loading ? 'Analyzing...' : (<><Search className=\"w-5 h-5\" /> Analyze & Find Similar</>)}\n          </button>\n          {error && <div className=\"text-red-400 text-sm mb-2\">{error}</div>}\n          {summary && (\n            <div className=\"bg-slate-900/70 text-white rounded-lg p-4 mb-4 border border-slate-700/30\">\n              <h3 className=\"font-semibold mb-2\">AI Summary</h3>\n              <p className=\"whitespace-pre-line text-sm\">{summary}</p>\n            </div>\n          )}\n          {/* Google CSE Search Box for Similar Images */}\n          {searchQuery && (\n            <div className=\"my-4\">\n              {/* The key ensures React fully re-mounts the widget when query changes */}\n              <div\n                className=\"gcse-search\"\n                key={searchQuery}\n                data-query={searchQuery}\n              ></div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AISearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}